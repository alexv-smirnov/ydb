# Generated by devtools/yamaker from nixpkgs 22.05.

LIBRARY()

LICENSE(
    Apache-2.0 AND
    Apache-2.0 WITH LLVM-exception AND
    MIT AND
    NCSA AND
    Public-Domain
)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

VERSION(15.0.5)

ORIGINAL_SOURCE(https://github.com/llvm/llvm-project/archive/llvmorg-15.0.5.tar.gz)

SET(SANITIZER_CFLAGS)

NO_COMPILER_WARNINGS()

NO_UTIL()

IF (SANITIZE_COVERAGE MATCHES "trace-pc")
    MESSAGE(FATAL_ERROR "I will crash you with trace-pc or trace-pc-guard. Use inline-8bit-counters.")
ENDIF()

NO_SANITIZE_COVERAGE()

IF (SANITIZER_TYPE == "undefined")
    NO_SANITIZE()
ENDIF()

IF (OS_WINDOWS)
    SRCS(
        standalone/StandaloneFuzzTargetMain.c
    )
ELSE()
    SRCS(
        FuzzerCrossOver.cpp
        FuzzerDataFlowTrace.cpp
        FuzzerDriver.cpp
        FuzzerExtFunctionsDlsym.cpp
        FuzzerExtFunctionsWeak.cpp
        FuzzerExtFunctionsWindows.cpp
        FuzzerExtraCounters.cpp
        FuzzerExtraCountersDarwin.cpp
        FuzzerExtraCountersWindows.cpp
        FuzzerFork.cpp
        FuzzerIO.cpp
        FuzzerIOPosix.cpp
        FuzzerIOWindows.cpp
        FuzzerLoop.cpp
        FuzzerMain.cpp
        FuzzerMerge.cpp
        FuzzerMutate.cpp
        FuzzerSHA1.cpp
        FuzzerTracePC.cpp
        FuzzerUtil.cpp
        FuzzerUtilDarwin.cpp
        FuzzerUtilLinux.cpp
        FuzzerUtilPosix.cpp
        FuzzerUtilWindows.cpp
    )
ENDIF()

END()

RECURSE(
    afl
)
